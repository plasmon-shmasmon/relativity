<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bokeh Plot</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.6.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.6.2.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>

    <div style="margin-left: 50px; margin-right: 50px; margin-top: 20px; margin-bottom: 20px">

    <div id="c6824fae-7448-46c1-af96-e54683c88764" data-root-id="p1079" style="display: contents;"></div>
  
    <script type="application/json" id="b0527aa8-2a27-487d-88bf-b7ef3cc4bf55">
      {"01ae0588-2f78-4bf5-8a74-23c99ede0049":{"version":"3.6.2","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"p1079","attributes":{"children":[{"type":"object","name":"Figure","id":"p1010","attributes":{"width":400,"x_range":{"type":"object","name":"Range1d","id":"p1019","attributes":{"start":-1}},"y_range":{"type":"object","name":"Range1d","id":"p1020","attributes":{"start":-10.25,"end":30.5}},"x_scale":{"type":"object","name":"LinearScale","id":"p1021"},"y_scale":{"type":"object","name":"LinearScale","id":"p1022"},"title":{"type":"object","name":"Title","id":"p1017"},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1052","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1001","attributes":{"selected":{"type":"object","name":"Selection","id":"p1002","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1003"},"data":{"type":"map","entries":[["x",[0]],["y",[0]],["width",[1]],["height",[20.5]],["velocity",[0]],["acceleration",[1]]]}}},"view":{"type":"object","name":"CDSView","id":"p1053","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1054"}}},"glyph":{"type":"object","name":"Rect","id":"p1049","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"width":{"type":"field","field":"width"},"height":{"type":"field","field":"height"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":null},"hatch_color":{"type":"value","value":null}}},"nonselection_glyph":{"type":"object","name":"Rect","id":"p1050","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"width":{"type":"field","field":"width"},"height":{"type":"field","field":"height"},"line_alpha":{"type":"value","value":0.1},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":null},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":null},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Rect","id":"p1051","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"width":{"type":"field","field":"width"},"height":{"type":"field","field":"height"},"line_alpha":{"type":"value","value":0.2},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":null},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":null},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p1061","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1004","attributes":{"selected":{"type":"object","name":"Selection","id":"p1005","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1006"},"data":{"type":"map","entries":[["x",[-0.5]],["y",[10]],["velocity",[0.4]],["moving_with_box",[false]],["time",[0]]]}}},"view":{"type":"object","name":"CDSView","id":"p1062","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1063"}}},"glyph":{"type":"object","name":"Scatter","id":"p1058","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"red"},"fill_color":{"type":"value","value":"red"},"hatch_color":{"type":"value","value":"red"}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1059","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1060","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p1070","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1007","attributes":{"selected":{"type":"object","name":"Selection","id":"p1008","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1009"},"data":{"type":"map","entries":[["x",[]],["y",[]]]}}},"view":{"type":"object","name":"CDSView","id":"p1071","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1072"}}},"glyph":{"type":"object","name":"Line","id":"p1067","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"red","line_width":2,"line_dash":[2,4]}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1068","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"red","line_alpha":0.1,"line_width":2,"line_dash":[2,4]}},"muted_glyph":{"type":"object","name":"Line","id":"p1069","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":"red","line_alpha":0.2,"line_width":2,"line_dash":[2,4]}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1018","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1033"},{"type":"object","name":"WheelZoomTool","id":"p1034","attributes":{"renderers":"auto"}},{"type":"object","name":"BoxZoomTool","id":"p1035","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1036","attributes":{"syncable":false,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","handles":{"type":"object","name":"BoxInteractionHandles","id":"p1042","attributes":{"all":{"type":"object","name":"AreaVisuals","id":"p1041","attributes":{"fill_color":"white","hover_fill_color":"lightgray"}}}}}}}},{"type":"object","name":"SaveTool","id":"p1043"},{"type":"object","name":"ResetTool","id":"p1044"},{"type":"object","name":"HelpTool","id":"p1045"}]}},"toolbar_location":null,"left":[{"type":"object","name":"LinearAxis","id":"p1028","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1029","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1030"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1031"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1023","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1024","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1025"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1026"}}}],"center":[{"type":"object","name":"Grid","id":"p1027","attributes":{"axis":{"id":"p1023"}}},{"type":"object","name":"Grid","id":"p1032","attributes":{"dimension":1,"axis":{"id":"p1028"}}}]}},{"type":"object","name":"Slider","id":"p1075","attributes":{"width":400,"title":"Acceleration","start":1,"end":6,"value":1,"step":0.01}},{"type":"object","name":"Row","id":"p1078","attributes":{"children":[{"type":"object","name":"Button","id":"p1073","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p1076","attributes":{"args":{"type":"map","entries":[["source",{"id":"p1001"}],["accel_slider",{"id":"p1075"}],["dot_source",{"id":"p1004"}],["path_source",{"id":"p1007"}]]},"code":"\n    var data = source.data;\n    var y = data['y'];\n    var velocity = data['velocity'];\n    var acceleration = accel_slider.value;  // Get the value from the slider\n    var time = dot_source.data['time'][0];  // Time from the dot's source\n    var time_step = 0.1;  // Time step for each update\n    var target_position = 20;  // Target position for the box\n    var box_right_x = 0.5;  // Right edge of the box\n\n    // Move the box upwards based on kinematics until it reaches the target position\n    function moveBox() {\n        time += time_step;  // Increase the time\n        var new_position = y[0] + velocity[0] * time_step + 0.5 * acceleration * Math.pow(time_step, 2);  // Calculate new position using kinematic equation\n        var new_velocity = velocity[0] + acceleration * time_step;  // Update velocity\n        \n        if (new_position &gt;= target_position) {\n            new_position = target_position;  // Cap the position at the target position\n            clearInterval(moveInterval);  // Stop the movement once we reach the target\n        }\n        \n        // Update the box's position and velocity\n        y[0] = new_position;\n        velocity[0] = new_velocity;\n        \n        // Move the dot to the right with constant velocity until x reaches 0.5\n        var dot_data = dot_source.data;\n        var dot_x = dot_data['x'];\n        var dot_velocity = dot_data['velocity'];\n        \n        // If the dot has not reached x = 0.5, move it to the right\n        if (dot_x[0] &lt; box_right_x) {\n            dot_x[0] += dot_velocity[0] * time_step;\n        } else {\n            // Start moving the dot upwards with the box's velocity and acceleration\n            dot_data['moving_with_box'][0] = true;\n        }\n\n        // If the dot is moving with the box, update its y position based on box's velocity\n        if (dot_data['moving_with_box'][0]) {\n            dot_data['y'][0] += velocity[0] * time_step;  // Move the dot upwards\n        }\n\n        // Make the dot disappear once it reaches the edge of the box (x &gt;= 0.5)\n        if (dot_data['x'][0] &gt;= box_right_x) {\n            dot_data['x'][0] = 2;  // Move the dot off-screen\n        }\n\n        // Recalculate the entire path of the dot in the reference frame of the box\n        var path_data = path_source.data;\n        \n        // Clear the previous path\n        path_data['x'] = [];\n        path_data['y'] = [];\n        \n        // Calculate the full path of the red dot up to the current time\n        var a = acceleration; // acceleration\n        var v = dot_velocity[0]; // velocity of the dot\n        \n        // Only plot points within the box's x-range (x &lt;= 0.5)\n        for (var t = 0; t &lt;= time; t += time_step) {\n            var path_x = -0.5 + v * t;  // Dot's x position at time t\n            if (path_x &gt; box_right_x) {\n                break;  // Stop plotting points once the dot exceeds x = 0.5\n            }\n            var path_y = (10 + 0.5 * a * Math.pow(t, 2)) -  a * Math.pow((path_x + 0.5) / v, 2);  // Dot's y position based on the kinematic equation\n            \n            // Add the new point to the path\n            path_data['x'].push(path_x);\n            path_data['y'].push(path_y + y[0]);  // Shift path upwards by box's current position\n        }\n        \n        // Trigger updates to the path\n        path_source.change.emit();\n        \n        // Trigger updates to the dot's position in the plot\n        dot_source.change.emit();\n        \n        // Trigger a plot update for the box\n        source.change.emit();\n    }\n\n    // Start the movement loop\n    var moveInterval = setInterval(moveBox, time_step * 1000);  // Move every time_step seconds\n"}}]]]},"width":100,"label":"Start Moving"}},{"type":"object","name":"Button","id":"p1074","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p1077","attributes":{"args":{"type":"map","entries":[["source",{"id":"p1001"}],["dot_source",{"id":"p1004"}],["path_source",{"id":"p1007"}]]},"code":"\n    var data = source.data;\n    var dot_data = dot_source.data;\n    var path_data = path_source.data;\n    \n    // Reset the box to its initial position\n    data['y'][0] = 0;  // Reset the box y position to 0\n    data['velocity'][0] = 0;  // Reset the box velocity\n    data['acceleration'][0] = 1;  // Reset acceleration to initial value\n\n    // Reset the dot to its initial position\n    dot_data['x'][0] = -0.5;  // Reset the dot x position to -0.5\n    dot_data['y'][0] = 10;  // Reset the dot y position to 10\n    dot_data['velocity'][0] = 0.4;  // Reset the dot velocity\n    dot_data['moving_with_box'][0] = false;  // Dot is not moving with the box initially\n    dot_data['time'][0] = 0;  // Reset time\n\n    // Clear the path of the dot\n    path_data['x'] = [];\n    path_data['y'] = [];\n\n    // Trigger updates to the plot\n    source.change.emit();\n    dot_source.change.emit();\n    path_source.change.emit();\n"}}]]]},"width":100,"label":"Reset"}}]}}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('b0527aa8-2a27-487d-88bf-b7ef3cc4bf55').textContent;
              const render_items = [{"docid":"01ae0588-2f78-4bf5-8a74-23c99ede0049","roots":{"p1079":"c6824fae-7448-46c1-af96-e54683c88764"},"root_ids":["p1079"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </div>
  </body>
</html>